!function(){"use strict";function e(){const e=document.querySelector(".post .postBody")||document.querySelector("#cnblogs_post_body");if(!e)return;const t=e.querySelectorAll("h1, h2, h3, h4, h5, h6");if(t.length<3)return;const n=document.createElement("div");n.className="toc-container",n.innerHTML='<div class="toc-title">目录</div><div class="toc-content"></div>';const o=n.querySelector(".toc-content"),s=[];t.forEach(((e,t)=>{e.id||(e.id=`heading-${t}`);const n=parseInt(e.tagName.substr(1),10),c=e.textContent,a=document.createElement("div");a.className=`toc-item toc-level-${n}`,a.style.paddingLeft=15*(n-1)+"px",a.innerHTML=`<a href="#${e.id}">${c}</a>`,o.appendChild(a),s.push(a),e.style.cursor="pointer",e.addEventListener("click",(()=>{window.location.hash=e.id}))})),e.insertBefore(n,e.firstChild),window.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop||document.body.scrollTop;let n=-1;t.forEach(((t,o)=>{t.offsetTop-100<=e&&(n=o)})),s.forEach(((e,t)=>{t===n?e.classList.add("active"):e.classList.remove("active")}))}))}function t(){const e=document.querySelector(".post .postBody")||document.querySelector("#cnblogs_post_body");if(!e)return;const t=e.querySelectorAll("img");if(0===t.length)return;const n=document.createElement("div");n.className="lightbox",n.innerHTML='\n            <div class="lightbox-container">\n                <img class="lightbox-image" src="" alt="">\n                <div class="lightbox-caption"></div>\n                <div class="lightbox-close">&times;</div>\n            </div>\n        ',document.body.appendChild(n);const o=n.querySelector(".lightbox-image"),s=n.querySelector(".lightbox-caption"),c=n.querySelector(".lightbox-close");t.forEach((e=>{e.style.cursor="zoom-in",e.addEventListener("click",(t=>{t.preventDefault(),o.src=e.src,s.textContent=e.alt||"",n.style.display="flex",document.body.style.overflow="hidden"}))})),c.addEventListener("click",(()=>{n.style.display="none",document.body.style.overflow=""})),n.addEventListener("click",(e=>{e.target===n&&(n.style.display="none",document.body.style.overflow="")}))}function n(){const e=document.querySelectorAll("pre code");0!==e.length&&e.forEach((e=>{const t=e.parentNode,n=e.className.match(/language-(\w+)/)||["",""],o=document.createElement("div");o.className="code-header",o.innerHTML=`\n                <span class="code-language">${n[1]||"code"}</span>\n                <span class="code-copy">复制</span>\n            `,t.insertBefore(o,e);const s=o.querySelector(".code-copy");s.addEventListener("click",(()=>{const t=e.textContent;navigator.clipboard.writeText(t).then((()=>{s.textContent="已复制",setTimeout((()=>{s.textContent="复制"}),2e3)}))}));const c=e.textContent.split("\n");if(c.length>1){const n=document.createElement("div");n.className="line-numbers";for(let e=1;e<=c.length;e++){const t=document.createElement("span");t.className="line-number",t.textContent=e,n.appendChild(t)}t.classList.add("with-line-numbers"),t.insertBefore(n,e)}}))}function o(){const e=document.querySelector(".post .postBody")||document.querySelector("#cnblogs_post_body");if(!e)return;const t=e.textContent.replace(/\s+/g,"").length,n=Math.ceil(t/400),o=document.createElement("div");o.className="post-stats",o.innerHTML=`\n            <span class="post-stats-item">\n                <i class="fa fa-file-text-o"></i> 字数统计: ${t} 字\n            </span>\n            <span class="post-stats-item">\n                <i class="fa fa-clock-o"></i> 阅读时间: 约 ${n} 分钟\n            </span>\n        `;const s=document.querySelector(".postTitle")||document.querySelector(".post-title");s?s.parentNode.insertBefore(o,s.nextSibling):e.insertBefore(o,e.firstChild)}function s(){const e=document.querySelector(".postDesc")||document.querySelector(".post-meta");if(!e)return;const t=encodeURIComponent(document.title),n=encodeURIComponent(window.location.href),o=document.createElement("div");o.className="post-sharing",o.innerHTML=`\n            <span class="sharing-label">分享到: </span>\n            <a href="https://service.weibo.com/share/share.php?url=${n}&title=${t}" target="_blank" class="sharing-item weibo">\n                <i class="fa fa-weibo"></i>\n            </a>\n            <a href="https://connect.qq.com/widget/shareqq/index.html?url=${n}&title=${t}" target="_blank" class="sharing-item qq">\n                <i class="fa fa-qq"></i>\n            </a>\n            <a href="https://twitter.com/intent/tweet?url=${n}&text=${t}" target="_blank" class="sharing-item twitter">\n                <i class="fa fa-twitter"></i>\n            </a>\n        `,e.appendChild(o)}function c(){e(),t(),n(),o(),s()}window.qbCnblogs=window.qbCnblogs||{},window.qbCnblogs.features={generateToc:e,enableLightbox:t,enhanceCodeHighlight:n,addPostStats:o,addSharingButtons:s},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}(),function(){"use strict";const e=Object.assign({},{themeStyle:"nabo",darkMode:!1,sidebarPosition:"right",infiniteScroll:!0,staticSrc:"",extCss:[],extJs:[]},window.__BLOG_CONFIG__||{});function t(){!function(){n("css/base.css"),n(`css/themes/${e.themeStyle}.css`),e.darkMode&&(n("css/dark-mode.css"),document.body.classList.add("dark-mode"));Array.isArray(e.extCss)&&e.extCss.forEach((e=>n(e,!0)))}(),o("js/features.js"),Array.isArray(e.extJs)&&e.extJs.forEach((e=>o(e,!0))),document.body.classList.add(`sidebar-${e.sidebarPosition}`),document.body.classList.add(`theme-${e.themeStyle}`),function(){(function(){const e=document.createElement("div");e.className="dark-mode-toggle",e.innerHTML='<i class="fa fa-moon-o"></i>',e.addEventListener("click",(()=>{document.body.classList.toggle("dark-mode"),localStorage.setItem("darkMode",document.body.classList.contains("dark-mode"))})),document.body.appendChild(e)})(),e.infiniteScroll&&document.getElementById("mainContent")&&window.addEventListener("scroll",(function(){const e=document.documentElement.scrollHeight;(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.clientHeight>=e-100&&console.log("加载更多文章...")}));(function(){const e=document.querySelectorAll("pre code");e.length>0&&e.forEach((e=>{const t=document.createElement("div");t.className="code-block-container";const n=document.createElement("button");n.className="copy-code-btn",n.innerHTML="复制",n.addEventListener("click",(()=>{const t=e.textContent;navigator.clipboard.writeText(t).then((()=>{n.innerHTML="已复制!",setTimeout((()=>{n.innerHTML="复制"}),2e3)}))})),e.parentNode.insertBefore(t,e),t.appendChild(e),t.appendChild(n)}))})(),function(){const e=document.createElement("div");e.className="back-to-top",e.innerHTML='<i class="fa fa-arrow-up"></i>',e.style.display="none",window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>100||document.body.scrollTop>100?e.style.display="block":e.style.display="none"})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.body.appendChild(e)}()}(),console.log("博客园快速美化框架已加载!")}function n(t,n=!1){const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=n?t:e.staticSrc+t,document.head.appendChild(o)}function o(t,n=!1){const o=document.createElement("script");o.type="text/javascript",o.src=n?t:e.staticSrc+t,document.body.appendChild(o)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}();